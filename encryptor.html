<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Custom Encrypt/Decrypt</title>
  <style>
    body { font-family: sans-serif; background: #121212; color: white; padding: 2em; }
    textarea, input[type=text] { width: 100%; padding: 1em; background: #1e1e1e; color: white; border: none; margin-top: 1em; border-radius: 6px; }
    button { padding: 1em; margin-top: 1em; background: #4caf50; color: white; border: none; cursor: pointer; border-radius: 6px; }
    button:hover { background: #45a049; }
  </style>
</head>
<body>

  <h1>Custom Multi-layer Encrypt/Decrypt</h1>
  <textarea id="inputText" rows="5" placeholder="Tulis teks di sini..."></textarea>
  <button onclick="process('encrypt')">Encrypt</button>
  <button onclick="process('decrypt')">Decrypt</button>
  <textarea id="outputText" rows="5" placeholder="Hasil..." readonly></textarea>

  <script>
    function caesar(text, shift) {
      return [...text].map(c => {
        const code = c.charCodeAt(0);
        if (c >= 'A' && c <= 'Z') return String.fromCharCode((code - 65 + shift + 26) % 26 + 65);
        if (c >= 'a' && c <= 'z') return String.fromCharCode((code - 97 + shift + 26) % 26 + 97);
        return c;
      }).join('');
    }

    function rot13(text) {
      return caesar(text, 13);
    }

    function textToBinary(text) {
      return text.split('').map(char => char.charCodeAt(0).toString(2).padStart(8, '0')).join(' ');
    }

    function binaryToText(binary) {
      return binary.split(' ').map(b => String.fromCharCode(parseInt(b, 2))).join('');
    }

    function encrypt(text) {
      text = caesar(text, 4);
      text = rot13(text);
      text = caesar(text, -5);
      text = textToBinary(text);
      text = btoa(text);
      text = caesar(text, 5);
      text = rot13(text);
      text = caesar(text, -4);
      return text;
    }

    function decrypt(text) {
      text = caesar(text, 4);
      text = rot13(text);
      text = caesar(text, -5);
      try {
        text = atob(text);
      } catch (e) {
        return "Error decoding base64!";
      }
      text = binaryToText(text);
      text = caesar(text, 5);
      text = rot13(text);
      text = caesar(text, -4);
      return text;
    }

    function process(mode) {
      const input = document.getElementById('inputText').value;
      const output = mode === 'encrypt' ? encrypt(input) : decrypt(input);
      document.getElementById('outputText').value = output;
    }
  </script>

</body>
</html>